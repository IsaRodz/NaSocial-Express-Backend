(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{19:function(e,t,a){e.exports=a(44)},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),s=a(3),l=a(1),u=a.n(l),i=a(4),m=a(5),p=a.n(m);var f=function(e){var t=e.logout;return r.a.createElement("header",null,r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"logo"},"LaboraSocial"),r.a.createElement("nav",null,r.a.createElement("span",{onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),t()}},"Log out"))))},d=a(18),E=a(6),v=a.n(E),h=function(e,t){v.a.fire({title:e,icon:t,showConfirmButton:!1,toast:!0,position:"bottom-left",timer:5e3})};var b=function(e){var t=e.id,a=e.author,c=e.content,o=e.createdAt,l=e.updatePosts,m=Object(n.useState)(!1),f=Object(s.a)(m,2),E=f[0],b=f[1],g=Object(n.useState)(c),k=Object(s.a)(g,2),S=k[0],O=k[1],j=localStorage.user,w=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("/api/posts/".concat(t),{author:j,content:S},{headers:{"x-access-token":localStorage.token}});case 2:b(!1),l(),h("Your post was updated","success");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"author"},r.a.createElement("div",{className:"top"},r.a.createElement("span",null,a),a===j?r.a.createElement("div",{className:"actions"},r.a.createElement("button",{onClick:function(){return b(!E)}},"Edit"),r.a.createElement("button",{onClick:function(){return function(e){v.a.fire({title:"Are you sure that you want to delete this post?",text:"Once you do it, you can't undo this action",showCancelButton:!0,customClass:!0}).then(function(){var t=Object(i.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==a.value){t.next=7;break}return t.next=3,p.a.delete("/api/posts/".concat(e),{headers:{"x-access-token":localStorage.token}});case 3:l(),h("Post deleted","success"),t.next=8;break;case 7:h("Your post is safe","success");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(t)}},"Delete")):null),r.a.createElement("div",{className:"date"},Object(d.a)(o))),r.a.createElement("div",{className:"content"},E?r.a.createElement(r.a.Fragment,null,r.a.createElement("textarea",{onChange:function(e){return O(e.target.value)},defaultValue:c}),r.a.createElement("button",{onClick:function(){return w(t)}},"Update"),r.a.createElement("button",{style:{color:"#f44336"},onClick:function(){return b(!1)}},"Cancel")):r.a.createElement("span",null,c)),r.a.createElement("div",{className:"card-actions"},r.a.createElement("button",{onClick:function(e){return function(e,t){e.target.className?console.log("Unlike"):console.log("Like"),e.target.classList.toggle("active")}(e)}},"34"," Likes"),r.a.createElement("button",null,"34"," Comments"),r.a.createElement("button",null,"34"," Share")))};var g=function(e){var t=e.sharePost,a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],l=c[1],m=function(){var e=Object(i.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,p.a.post("/api/posts",{author:localStorage.user,content:o},{headers:{"x-access-token":localStorage.token}});case 3:l(""),t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"card"},r.a.createElement("form",{onSubmit:m},r.a.createElement("div",{className:"input"},r.a.createElement("textarea",{value:o,onChange:function(e){return l(e.target.value)},placeholder:"What's on your mind?"}),r.a.createElement("span",null)),r.a.createElement("button",{type:"submit",className:"btn",disabled:!o},"Share")))};var k=function(e){Object(n.useEffect)((function(){l()}),[]);var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],o=a[1],l=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/posts",{headers:{"x-access-token":localStorage.token}});case 2:t=e.sent,o(t.data.reverse());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{logout:e.logout}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"notesList"},r.a.createElement(g,{sharePost:l}),r.a.createElement("h1",null,"Latest posts"),c.map((function(e){return r.a.createElement(b,{key:e._id,id:e._id,author:e.author,content:e.content,createdAt:e.createdAt,updatePosts:l})})))))},S=a(7);var O=function(e){var t=Object(n.useState)({email:null,password:null}),a=Object(s.a)(t,2),c=a[0],o=a[1],l=function(){var t=Object(i.a)(u.a.mark((function t(a){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,p.a.post("/api/users/login",c);case 3:n=t.sent,(r=n.data).auth?(h("Logged in successfully!","success"),localStorage.setItem("token",r.token),localStorage.setItem("user",r.user),e.login()):h("User or password is incorrect","error");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"login "},r.a.createElement("form",{onSubmit:l},r.a.createElement("h2",null,"Sign In "),r.a.createElement("div",{className:"input"},r.a.createElement("input",{onChange:function(e){return o(Object(S.a)({},c,{email:e.target.value}))},type:"email",placeholder:"Email"}),r.a.createElement("span",null)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{onChange:function(e){return o(Object(S.a)({},c,{password:e.target.value}))},type:"password",placeholder:"Password"}),r.a.createElement("span",null)),r.a.createElement("button",{type:"submit",className:"btn"},"Sign In")))};var j=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){localStorage.token&&c(!0)}),[]),r.a.createElement("div",{className:"App"},a?r.a.createElement(k,{logout:function(){return c(!1)}}):r.a.createElement(O,{login:function(){return c(!0)}}))};a(42),a(43);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.e2bb13a7.chunk.js.map