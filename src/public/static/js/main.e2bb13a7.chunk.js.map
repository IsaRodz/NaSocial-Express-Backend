{"version":3,"sources":["components/Nav.js","helpers/toast.js","components/PostCard.js","components/PostForm.js","views/PostsList.js","views/Login.js","components/App.js","index.js"],"names":["Nav","logout","className","onClick","localStorage","removeItem","toast","text","icon","Swal","fire","title","showConfirmButton","position","timer","PostCard","id","author","content","createdAt","updatePosts","useState","editing","setEdit","newContent","setContent","currentUser","user","updatePost","a","axios","put","headers","token","showCancelButton","customClass","then","action","value","delete","deletePost","format","onChange","e","target","defaultValue","style","color","console","log","classList","toggle","likePost","PostForm","sharePost","onSubmit","preventDefault","post","placeholder","type","disabled","PostsList","props","useEffect","fetchData","posts","setPosts","get","response","data","reverse","map","key","_id","Login","email","password","setUser","sendLoginForm","auth","setItem","login","App","isLogged","setLogged","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e2bb13a7.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nfunction Nav({ logout }) {\r\n    return (\r\n        <header>\r\n            <div className=\"container\">\r\n                <span className=\"logo\">LaboraSocial</span>\r\n                <nav>\r\n                    <span\r\n                        onClick={() => {\r\n                            localStorage.removeItem(\"token\");\r\n                            localStorage.removeItem(\"user\");\r\n                            logout();\r\n                        }}\r\n                    >\r\n                        Log out\r\n                    </span>\r\n                </nav>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Nav;\r\n","import Swal from \"sweetalert2\";\r\n\r\nexport const toast = (text, icon) => {\r\n    Swal.fire({\r\n        title: text,\r\n        icon: icon,\r\n        showConfirmButton: false,\r\n        toast: true,\r\n        position: \"bottom-left\",\r\n        timer: 5000,\r\n    });\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { format } from \"timeago.js\";\r\nimport axios from \"axios\";\r\n\r\nimport { toast } from \"../helpers/toast\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nfunction PostCard({ id, author, content, createdAt, updatePosts }) {\r\n    const [editing, setEdit] = useState(false);\r\n    const [newContent, setContent] = useState(content);\r\n\r\n    const currentUser = localStorage.user;\r\n\r\n    const updatePost = async id => {\r\n        await axios.put(\r\n            `/api/posts/${id}`,\r\n            {\r\n                author: currentUser,\r\n                content: newContent,\r\n            },\r\n            {\r\n                headers: { \"x-access-token\": localStorage.token },\r\n            }\r\n        );\r\n        setEdit(false);\r\n        updatePosts();\r\n        toast(\"Your post was updated\", \"success\");\r\n    };\r\n\r\n    const deletePost = id => {\r\n        Swal.fire({\r\n            title: \"Are you sure that you want to delete this post?\",\r\n            text: \"Once you do it, you can't undo this action\",\r\n            showCancelButton: true,\r\n            customClass: true,\r\n        }).then(async action => {\r\n            if (action.value === true) {\r\n                await axios.delete(`/api/posts/${id}`, {\r\n                    headers: { \"x-access-token\": localStorage.token },\r\n                });\r\n                updatePosts();\r\n                toast(\"Post deleted\", \"success\");\r\n            } else {\r\n                toast(\"Your post is safe\", \"success\");\r\n            }\r\n        });\r\n    };\r\n\r\n    const likePost = (e, id) => {\r\n        if (!e.target.className) {\r\n            console.log(\"Like\");\r\n        } else {\r\n            console.log(\"Unlike\");\r\n        }\r\n        e.target.classList.toggle(\"active\");\r\n    };\r\n\r\n    return (\r\n        <div className=\"card\">\r\n            <div className=\"author\">\r\n                <div className=\"top\">\r\n                    <span>{author}</span>\r\n                    {author === currentUser ? (\r\n                        <div className=\"actions\">\r\n                            <button onClick={() => setEdit(!editing)}>\r\n                                Edit\r\n                            </button>\r\n                            <button onClick={() => deletePost(id)}>\r\n                                Delete\r\n                            </button>\r\n                        </div>\r\n                    ) : null}\r\n                </div>\r\n                <div className=\"date\">{format(createdAt)}</div>\r\n            </div>\r\n            <div className=\"content\">\r\n                {editing ? (\r\n                    <>\r\n                        <textarea\r\n                            onChange={e => setContent(e.target.value)}\r\n                            defaultValue={content}\r\n                        />\r\n                        <button onClick={() => updatePost(id)}>Update</button>\r\n                        <button\r\n                            style={{ color: \"#f44336\" }}\r\n                            onClick={() => setEdit(false)}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                    </>\r\n                ) : (\r\n                    <span>{content}</span>\r\n                )}\r\n            </div>\r\n            <div className=\"card-actions\">\r\n                <button onClick={e => likePost(e, id)}>{\"34\"} Likes</button>\r\n                <button>{\"34\"} Comments</button>\r\n                <button>{\"34\"} Share</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PostCard;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction PostForm({ sharePost }) {\r\n    const [content, setContent] = useState(\"\");\r\n\r\n    const onSubmit = async e => {\r\n        e.preventDefault();\r\n\r\n        await axios.post(\r\n            \"/api/posts\",\r\n            {\r\n                author: localStorage.user,\r\n                content,\r\n            },\r\n            { headers: { \"x-access-token\": localStorage.token } }\r\n        );\r\n        setContent(\"\");\r\n        sharePost();\r\n    };\r\n\r\n    return (\r\n        <div className=\"card\">\r\n            <form onSubmit={onSubmit}>\r\n                <div className=\"input\">\r\n                    <textarea\r\n                        value={content}\r\n                        onChange={e => setContent(e.target.value)}\r\n                        placeholder=\"What's on your mind?\"\r\n                    />\r\n                    <span></span>\r\n                </div>\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"btn\"\r\n                    disabled={content ? false : true}\r\n                >\r\n                    Share\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PostForm;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport Nav from \"../components/Nav\";\r\nimport PostCard from \"../components/PostCard\";\r\nimport PostForm from \"../components/PostForm\";\r\n\r\nfunction PostsList(props) {\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const [posts, setPosts] = useState([]);\r\n\r\n    const fetchData = async () => {\r\n        let response = await axios.get(\"/api/posts\", {\r\n            headers: {\r\n                \"x-access-token\": localStorage.token,\r\n            },\r\n        });\r\n        setPosts(response.data.reverse());\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Nav logout={props.logout} />\r\n            <div className=\"container\">\r\n                <div className=\"notesList\">\r\n                    <PostForm sharePost={fetchData} />\r\n                    <h1>Latest posts</h1>\r\n                    {posts.map(post => (\r\n                        <PostCard\r\n                            key={post._id}\r\n                            id={post._id}\r\n                            author={post.author}\r\n                            content={post.content}\r\n                            createdAt={post.createdAt}\r\n                            updatePosts={fetchData}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default PostsList;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"../helpers/toast\";\r\n\r\nfunction Login(props) {\r\n    const [user, setUser] = useState({ email: null, password: null });\r\n\r\n    const sendLoginForm = async e => {\r\n        e.preventDefault();\r\n\r\n        const { data } = await axios.post(\"/api/users/login\", user);\r\n        if (!data.auth) {\r\n            toast(\"User or password is incorrect\", \"error\");\r\n        } else {\r\n            toast(\"Logged in successfully!\", \"success\");\r\n            localStorage.setItem(\"token\", data.token);\r\n            localStorage.setItem(\"user\", data.user);\r\n            props.login();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"login \">\r\n            <form onSubmit={sendLoginForm}>\r\n                <h2>Sign In </h2>\r\n                <div className=\"input\">\r\n                    <input\r\n                        onChange={e =>\r\n                            setUser({ ...user, email: e.target.value })\r\n                        }\r\n                        type=\"email\"\r\n                        placeholder=\"Email\"\r\n                    />\r\n                    <span></span>\r\n                </div>\r\n                <div className=\"input\">\r\n                    <input\r\n                        onChange={e =>\r\n                            setUser({ ...user, password: e.target.value })\r\n                        }\r\n                        type=\"password\"\r\n                        placeholder=\"Password\"\r\n                    />\r\n                    <span></span>\r\n                </div>\r\n                <button type=\"submit\" className=\"btn\">\r\n                    Sign In\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n","import React, {\n    useState,\n    useEffect,\n    // useContext,\n} from \"react\";\n\n// import { LoginContext, LoginProvider } from \"../context/LoginContext\";\nimport PostsList from \"../views/PostsList\";\nimport Login from \"../views/Login\";\n\nfunction App() {\n    // const value = useContext(LoginContext);\n    // console.log(value);\n    const [isLogged, setLogged] = useState(false);\n\n    useEffect(() => {\n        if (localStorage.token) setLogged(true);\n    }, []);\n\n    const logout = () => setLogged(false);\n    const login = () => setLogged(true);\n\n    return (\n        <div className=\"App\">\n            {isLogged ? <PostsList logout={logout} /> : <Login login={login} />}\n        </div>\n    );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nimport \"./index.scss\";\nimport \"./main.scss\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}